<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".widget.WidgetConfigureActivity">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="选择要显示的日程"
        android:textAppearance="?attr/textAppearanceTitleMedium"
        android:padding="16dp"
        android:textStyle="bold"/>

    <!-- 日程列表 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view_widget_config"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="?attr/colorOutlineVariant"/>

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingBottom="16dp">

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="背景样式"
                android:textAppearance="?attr/textAppearanceTitleMedium"
                android:textStyle="bold"
                android:paddingHorizontal="16dp"
                android:paddingTop="16dp"/>

            <RadioGroup
                android:id="@+id/widget_bg_type_group"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:paddingHorizontal="16dp">
                <RadioButton
                    android:id="@+id/widget_bg_transparent"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="半透明"
                    android:layout_weight="1"
                    android:checked="true" />
                <RadioButton
                    android:id="@+id/widget_bg_solid"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="不透明"
                    android:layout_weight="1"/>
                <RadioButton
                    android:id="@+id/widget_bg_image"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="图片"
                    android:layout_weight="1"/>
            </RadioGroup>
            <!-- 1. 图片透明度 (图片模式下显示) -->
            <LinearLayout
                android:id="@+id/image_alpha_container"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:visibility="gone">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="图片透明度"
                    android:textSize="12sp"
                    android:layout_marginTop="4dp"/>
                <com.google.android.material.slider.Slider
                    android:id="@+id/slider_image_alpha"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:valueFrom="0"
                    android:valueTo="100"
                    android:value="100"
                    android:stepSize="10"/>
            </LinearLayout>

            <!-- 2. 遮罩设置 (图片模式下显示) -->
            <LinearLayout
                android:id="@+id/scrim_settings_container"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:visibility="gone">

                <com.google.android.material.materialswitch.MaterialSwitch
                    android:id="@+id/switch_show_scrim"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="启用主题色遮罩"
                    android:checked="true"/>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="遮罩浓度"
                    android:textSize="12sp"/>
                <com.google.android.material.slider.Slider
                    android:id="@+id/slider_scrim_alpha"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:valueFrom="0"
                    android:valueTo="100"
                    android:value="40"
                    android:stepSize="10"/>
            </LinearLayout>

            <!-- 颜色选择器 (半透明和不透明模式共享) -->
            <HorizontalScrollView
                android:id="@+id/color_selector_container"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:scrollbars="none"
                android:paddingHorizontal="16dp"
                android:visibility="visible">
                <LinearLayout
                    android:id="@+id/color_palette"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"/>
            </HorizontalScrollView>

            <!-- 透明度滑块 (仅在半透明模式显示) -->
            <LinearLayout
                android:id="@+id/alpha_slider_container"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:visibility="visible">
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="透明度调节"
                    android:textSize="12sp"
                    android:layout_marginTop="4dp"/>
                <com.google.android.material.slider.Slider
                    android:id="@+id/slider_widget_alpha"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:valueFrom="0"
                    android:valueTo="100"
                    android:value="40"
                    android:stepSize="10"/>
            </LinearLayout>

            <Button
                android:id="@+id/widget_select_image_button"
                style="@style/Widget.Material3.Button.TonalButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginStart="16dp"
                android:text="选择图片"
                android:visibility="gone"/>

            <!-- 确认按钮 -->
            <Button
                android:id="@+id/btn_confirm_add_widget"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="16dp"
                android:text="添加微件"
                android:enabled="false"/> <!-- 默认禁用，直到选择了日程 -->

        </LinearLayout>
    </ScrollView>
</LinearLayout>